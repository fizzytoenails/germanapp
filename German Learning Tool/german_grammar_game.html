<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <title>DeutscheTag | Sentence Match</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;700&family=Playfair+Display:wght@500;600&display=swap');

        :root {
            --bg: linear-gradient(135deg, #f7f4ff 0%, #f9f6ef 45%, #eef5ff 100%);
            --card: #ffffff;
            --ink: #0f172a;
            --muted: #64748b;
            --accent: #6d4bff;
            --accent-2: #2b72ff;
            --soft: rgba(109, 75, 255, 0.12);
            --shadow: 0 18px 45px rgba(15, 23, 42, 0.12);
            --soft-shadow: 0 12px 24px rgba(15, 23, 42, 0.08);
            --radius-lg: 26px;
            --radius-md: 18px;
            --radius-sm: 12px;
            --nav-bg: rgba(255, 255, 255, 0.82);
            --border: rgba(148, 163, 184, 0.2);
            --success: #22c55e;
            --danger: #ef4444;
            --warning: #f59e0b;
        }

        body.theme-dark {
            --bg: linear-gradient(135deg, #0b1120 0%, #0f172a 45%, #111827 100%);
            --card: #101827;
            --ink: #e2e8f0;
            --muted: #94a3b8;
            --accent: #8b5cf6;
            --accent-2: #38bdf8;
            --soft: rgba(139, 92, 246, 0.18);
            --shadow: 0 18px 45px rgba(0, 0, 0, 0.45);
            --soft-shadow: 0 12px 24px rgba(0, 0, 0, 0.35);
            --nav-bg: rgba(15, 23, 42, 0.82);
            --border: rgba(148, 163, 184, 0.2);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            min-height: 100vh;
            background: var(--bg);
            font-family: 'Manrope', 'Segoe UI', sans-serif;
            color: var(--ink);
            display: flex;
            justify-content: center;
            padding: 20px;
            overflow-x: hidden;
            touch-action: pan-y;
            overscroll-behavior-x: none;
        }

        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at 20% 20%, rgba(109, 75, 255, 0.18), transparent 55%),
                        radial-gradient(circle at 80% 10%, rgba(43, 114, 255, 0.15), transparent 45%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .nav {
            position: relative;
            position: relative;
            background: var(--nav-bg);
            border-radius: var(--radius-lg);
            padding: 12px 18px;
            box-shadow: var(--soft-shadow);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            flex-wrap: wrap;
            backdrop-filter: blur(12px);
            border: 1px solid var(--border);
        }

        .brand {
    text-decoration: none;
    color: inherit;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .brand img {
            width: 44px;
            height: 44px;
            border-radius: 14px;
            box-shadow: 0 8px 18px rgba(109, 75, 255, 0.2);
        }

        .brand h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.2rem, 2.4vw, 1.8rem);
        }

                                        
        .nav-links {
            display: none;
            position: absolute;
            right: 16px;
            top: 68px;
            flex-direction: column;
            align-items: stretch;
            background: var(--card);
            padding: 12px;
            border-radius: 16px;
            border: 1px solid var(--border);
            box-shadow: var(--soft-shadow);
            z-index: 35;
            min-width: 180px;
        }

        .nav-links.open { display: flex; }

        .nav-links a {
            text-decoration: none;
            color: var(--muted);
            padding: 8px 12px;
            border-radius: 999px;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .nav-links a.active,
        .nav-links a:hover {
            background: var(--soft);
            color: var(--accent);
        }
        .nav-actions {
            margin-right: 68px;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .theme-select {
            border: 1px solid var(--border);
            background: var(--card);
            color: var(--ink);
            padding: 8px 10px;
            border-radius: 12px;
            font-weight: 600;
        }

        .timer {
            background: var(--card);
            border-radius: 14px;
            padding: 10px 14px;
            display: grid;
            gap: 6px;
            min-width: 220px;
            border: 1px solid var(--border);
        }

        .timer .row {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--muted);
        }

        .timer strong { color: var(--ink); }

        .timer button {
            border: none;
            border-radius: 10px;
            padding: 6px 10px;
            font-weight: 600;
            cursor: pointer;
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            color: white;
            transition: transform 0.2s ease;
        }

        .timer button:hover { animation: bounce 0.6s; }

        .timer .note {
            font-size: 0.8rem;
            color: var(--warning);
            min-height: 18px;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }

        .hero {
            background: var(--card);
            border-radius: var(--radius-lg);
            padding: 18px;
            box-shadow: var(--shadow);
        }

        .hero h2 { font-size: 1.4rem; }
        .hero p { color: var(--muted); }

        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-top: 12px;
        }

        .stat {
            background: rgba(148, 163, 184, 0.12);
            border-radius: var(--radius-md);
            padding: 12px;
            text-align: center;
        }

        .stat strong {
            display: block;
            font-size: 1.2rem;
            color: var(--accent);
        }

        .stat span { color: var(--muted); font-size: 0.85rem; }

        .message {
            text-align: center;
            font-weight: 600;
            min-height: 26px;
            color: var(--muted);
        }

        .message.success { color: var(--success); }
        .message.error { color: var(--danger); }

        .board {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            min-width: 0;
        }

        .column {
            background: rgba(255, 255, 255, 0.65);
            border-radius: var(--radius-lg);
            padding: 16px;
            backdrop-filter: blur(10px);
            box-shadow: var(--soft-shadow);
            min-width: 0;
        }

        .column h3 { margin-bottom: 12px; font-size: 1rem; }
        .phrase-list { display: flex; flex-direction: column; gap: 10px; }

        .phrase-card {
            padding: 12px 14px;
            background: var(--card);
            border-radius: var(--radius-md);
            cursor: pointer;
            border: 1px solid transparent;
            transition: transform 0.2s ease, box-shadow 0.2s ease, border 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            min-height: 60px;
            word-break: break-word;
        }

        .phrase-card:hover { transform: translateY(-2px); }

        .phrase-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .phrase-text { font-weight: 600; }
        .phrase-literal {
            font-size: 0.85rem;
            color: var(--ink);
            display: none;
            background: rgba(109, 75, 255, 0.18);
            border-radius: 10px;
            padding: 8px 10px;
        }

        .phrase-card.flipped .phrase-literal { display: block; }

        .phrase-card.selected {
            border-color: #6d4bff;
            background: rgba(109, 75, 255, 0.2);
            box-shadow: 0 0 12px rgba(109, 75, 255, 0.35);
        }

        .phrase-card.matched {
            background: rgba(34, 197, 94, 0.2);
            border-color: #22c55e;
            box-shadow: 0 0 14px rgba(34, 197, 94, 0.4);
            pointer-events: none;
            opacity: 0.9;
        }

        .phrase-card.wrong {
            border-color: rgba(239, 68, 68, 0.7);
            animation: shake 0.4s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-4px); }
            75% { transform: translateX(4px); }
        }

        .card-icons {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        .icon-btn {
            width: 32px;
            height: 32px;
            border-radius: 10px;
            background: rgba(148, 163, 184, 0.2);
            display: grid;
            place-items: center;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .icon-btn svg { width: 16px; height: 16px; stroke: #3b4a6b; }
        .icon-btn:active { transform: scale(0.95); }

        .actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            flex-wrap: wrap;
        }

        .primary-btn {
            border: none;
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            color: white;
            padding: 12px 20px;
            border-radius: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 10px 22px rgba(109, 75, 255, 0.25);
        }

        .primary-btn:hover { animation: bounce 0.6s; }

        .secondary-btn {
            border: none;
            background: rgba(148, 163, 184, 0.18);
            color: var(--ink);
            padding: 12px 18px;
            border-radius: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        @media (max-width: 980px) {
            .board { grid-template-columns: 1fr 1fr; }
            .column { padding: 12px; }
            .phrase-card { min-height: 52px; padding: 10px 12px; font-size: 0.92rem; }
        }

        @media (max-width: 820px) {
            .nav { justify-content: center; }
            .timer { width: 100%; }
            .stats { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 640px) {
            body { padding: 12px; }
            .nav-actions { width: 100%; justify-content: space-between; }
            .board { grid-template-columns: 1fr 1fr; gap: 10px; }
            .phrase-literal { font-size: 0.78rem; }
        }
            .nav-actions { width: 100%; justify-content: space-between; }
        }
    
                .settings-panel {
            position: fixed;
            right: 22px;
            bottom: 88px;
            width: min(320px, 90vw);
            background: var(--card);
            border-radius: 18px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            padding: 14px;
            display: none;
            flex-direction: column;
            gap: 12px;
            z-index: 50;
        }

        .settings-panel.open { display: flex; }

        .settings-panel h4 { font-size: 1rem; }
        .settings-row { display: flex; gap: 8px; flex-wrap: wrap; }
        .settings-row select {
            border: 1px solid var(--border);
            background: var(--card);
            color: var(--ink);
            padding: 8px 10px;
            border-radius: 10px;
            font-weight: 600;
        }
        .settings-note { font-size: 0.85rem; color: var(--muted); }
        .debug-box { background: rgba(148, 163, 184, 0.12); padding: 10px; border-radius: 10px; font-size: 0.85rem; color: var(--muted); }
        .settings-actions { display: flex; gap: 8px; }
        .settings-actions button {
            border: none;
            border-radius: 10px;
            padding: 8px 12px;
            font-weight: 600;
            cursor: pointer;
            background: rgba(148, 163, 184, 0.2);
            color: var(--ink);
        }
    
        .menu-toggle {
            display: inline-flex;
            border: none;
            background: rgba(148, 163, 184, 0.2);
            width: 44px;
            height: 44px;
            border-radius: 12px;
            cursor: pointer;
            align-items: center;
            justify-content: center;
            gap: 4px;
            flex-direction: column;
            position: absolute;
            right: 16px;
            top: 16px;
            z-index: 40;
        }

        .menu-toggle span {
            width: 20px;
            height: 2px;
            background: var(--ink);
            border-radius: 999px;
            display: block;
        }

        .nav { position: relative; }

                        .nav-actions { margin-right: 68px; }

        .settings-fab {
            position: fixed;
            right: 22px;
            bottom: 22px;
            width: 52px;
            height: 52px;
            border-radius: 16px;
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            color: white;
            display: grid;
            place-items: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            z-index: 60;
        }

        .settings-panel {
            position: fixed;
            right: 22px;
            bottom: 88px;
            width: min(320px, 90vw);
            background: var(--card);
            border-radius: 18px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            padding: 14px;
            display: none;
            flex-direction: column;
            gap: 12px;
            z-index: 60;
        }

        .settings-panel.open { display: flex; }

        .settings-panel h4 { font-size: 1rem; }
        .settings-row { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
        .settings-row select {
            border: 1px solid var(--border);
            background: var(--card);
            color: var(--ink);
            padding: 8px 10px;
            border-radius: 10px;
            font-weight: 600;
        }
        .settings-note { font-size: 0.85rem; color: var(--muted); }
        .debug-box { background: rgba(148, 163, 184, 0.12); padding: 10px; border-radius: 10px; font-size: 0.85rem; color: var(--muted); }
        .settings-actions { display: flex; gap: 8px; }
        .settings-actions button {
            border: none;
            border-radius: 10px;
            padding: 8px 12px;
            font-weight: 600;
            cursor: pointer;
            background: rgba(148, 163, 184, 0.2);
            color: var(--ink);
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="nav">
            <a class="brand" href="index.html">
                <img src="apple-touch-icon.png" alt="DeutscheTag logo">
                <div>
                    <h1>DeutscheTag</h1>
                    <div style="color: var(--muted); font-size: 0.9rem;">Sentence match</div>
                </div>
            </a>
            <button class="menu-toggle" id="menuToggle" aria-label="Open navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="german_matching_game.html">Vocabulary</a>
                <a class="active" href="german_grammar_game.html">Sentence Match</a>
                <a href="typing_practice.html">Typing</a>
                <a href="dictionary.html">Dictionary</a>
                <a href="fundamentals.html">Time & Alphabet</a>
                <a href="number_time_match.html">Number/Time Match</a>
                <a href="grammar_guide.html">Grammar Guide</a>
                <a href="falling_match.html">Falling Match</a>
                            <a href="german_2048.html">2048</a>
                            <a href="translate_parse.html">Translate</a>
            </div>
            <div class="nav-actions">
                <div class="timer" id="timerWidget">
                    <div class="row"><span>Session</span><strong id="sessionTime">00:00</strong></div>
                    <div class="row"><span>Today</span><strong id="todayTime">00:00</strong></div>
                    <div class="row"><span>Streak</span><strong id="streakCount">0 days</strong></div>
                    <div class="note" id="timerNote"></div>
                    <button id="timerToggle">Start</button>
                </div>
            </div>
        </nav>

        <section class="hero">
            <h2>Sentence Match</h2>
            <p>Match full phrases. Tap the hint icon to reveal literal translations and reinforce word order.</p>
            <div class="stats">
                <div class="stat"><strong id="roundNumber">1</strong><span>Round</span></div>
                <div class="stat"><strong id="roundScore">0/10</strong><span>This round</span></div>
                <div class="stat"><strong id="totalScore">0</strong><span>Correct</span></div>
                <div class="stat"><strong id="accuracy">0%</strong><span>Accuracy</span></div>
            </div>
        </section>

        <div class="message" id="message"></div>

        <section class="board">
            <div class="column">
                <h3>Deutsch</h3>
                <div class="phrase-list" id="germanPhrases"></div>
            </div>
            <div class="column">
                <h3>English</h3>
                <div class="phrase-list" id="englishPhrases"></div>
            </div>
        </section>

        <div class="actions">
            <button class="secondary-btn" id="homeBtnFooter">Home</button>
            <button class="primary-btn" id="nextBtn">Next round</button>
        </div>
    </div>

    <script>

const allPhrases = [
            ['Ich bin müde.', 'I am tired.', 'I am tired'],
            ['Wir haben Zeit.', 'We have time.', 'We have time'],
            ['Er kommt heute.', 'He is coming today.', 'He comes today'],
            ['Sie geht nach Hause.', 'She is going home.', 'She goes to home'],
            ['Das ist gut.', 'That is good.', 'That is good'],
            ['Ich weiß nicht.', "I don't know.", 'I know not'],
            ['Es wird kalt.', "It's getting cold.", 'It becomes cold'],
            ['Wir bleiben hier.', 'We are staying here.', 'We stay here'],
            ['Er sieht das Auto.', 'He sees the car.', 'He sees the car'],
            ['Sie arbeitet viel.', 'She works a lot.', 'She works much'],
            ['Ich kann schwimmen.', 'I can swim.', 'I can swim'],
            ['Wir müssen gehen.', 'We must go.', 'We must go'],
            ['Er will spielen.', 'He wants to play.', 'He wants to-play'],
            ['Sie soll warten.', 'She should wait.', 'She should wait'],
            ['Ich darf das machen.', 'I may do that.', 'I may that do'],
            ['Wir können helfen.', 'We can help.', 'We can help'],
            ['Du musst lernen.', 'You must learn.', 'You must learn'],
            ['Ich möchte schlafen.', 'I would like to sleep.', 'I would-like sleep'],
            ['Er will das Buch lesen.', 'He wants to read the book.', 'He wants the book read'],
            ['Sie müssen arbeiten.', 'They must work.', 'They must work'],
            ['Ich habe kein Geld.', 'I have no money.', 'I have no money'],
            ['Er kommt nicht.', 'He is not coming.', 'He comes not'],
            ['Wir haben keine Zeit.', 'We have no time.', 'We have no time'],
            ['Das geht nicht.', "That doesn't work.", 'That goes not'],
            ['Ich kann nicht kommen.', 'I cannot come.', 'I can not come'],
            ['Sie will nicht sprechen.', "She doesn't want to speak.", 'She wants not speak'],
            ['Das ist nicht richtig.', 'That is not correct.', 'That is not correct'],
            ['Ich verstehe nichts.', 'I understand nothing.', 'I understand nothing'],
            ['Er weiß nichts.', 'He knows nothing.', 'He knows nothing'],
            ['Wir haben nichts.', 'We have nothing.', 'We have nothing'],
            ['Wie geht es dir?', 'How are you?', 'How goes it to-you?'],
            ['Was machst du?', 'What are you doing?', 'What make you?'],
            ['Wo bist du?', 'Where are you?', 'Where are you?'],
            ['Wann kommst du?', 'When are you coming?', 'When come you?'],
            ['Warum fragst du?', 'Why are you asking?', 'Why ask you?'],
            ['Wer ist das?', 'Who is that?', 'Who is that?'],
            ['Wie viel kostet das?', 'How much does that cost?', 'How much costs that?'],
            ['Wohin gehst du?', 'Where are you going?', 'Where-to go you?'],
            ['Wie spät ist es?', 'What time is it?', 'How late is it?'],
            ['Was ist das?', 'What is that?', 'What is that?'],
            ['Ich habe gegessen.', 'I have eaten.', 'I have eaten'],
            ['Wir sind gegangen.', 'We have gone.', 'We are gone'],
            ['Er hat geschlafen.', 'He has slept.', 'He has slept'],
            ['Sie ist gekommen.', 'She has come.', 'She is come'],
            ['Ich habe es gemacht.', 'I have done it.', 'I have it done'],
            ['Wir haben gesprochen.', 'We have spoken.', 'We have spoken'],
            ['Er hat gearbeitet.', 'He has worked.', 'He has worked'],
            ['Sie sind geblieben.', 'They have stayed.', 'They are stayed'],
            ['Ich habe geschrieben.', 'I have written.', 'I have written'],
            ['Er hat gesagt.', 'He has said.', 'He has said'],
            ['Ich weiß, dass er kommt.', 'I know that he is coming.', 'I know, that he comes'],
            ['Er sagt, dass es gut ist.', 'He says that it is good.', 'He says, that it good is'],
            ['Ich glaube, dass du recht hast.', 'I believe that you are right.', 'I believe, that you right have'],
            ['Sie denkt, dass wir Zeit haben.', 'She thinks that we have time.', 'She thinks, that we time have'],
            ['Ich hoffe, dass es klappt.', 'I hope that it works.', 'I hope, that it works'],
            ['Er meint, dass es wichtig ist.', 'He thinks that it is important.', 'He means, that it important is'],
            ['Wir wissen, dass sie hier ist.', 'We know that she is here.', 'We know, that she here is'],
            ['Ich finde, dass das richtig ist.', 'I find that is correct.', 'I find, that that correct is'],
            ['Ich gehe, weil ich müde bin.', "I'm going because I am tired.", 'I go, because I tired am'],
            ['Er bleibt, weil er Zeit hat.', "He's staying because he has time.", 'He stays, because he time has'],
            ['Wir lernen, weil es wichtig ist.', "We're learning because it is important.", 'We learn, because it important is'],
            ['Sie kommt nicht, weil sie krank ist.', "She's not coming because she is sick.", 'She comes not, because she sick is'],
            ['Ich warte, weil du kommst.', "I'm waiting because you are coming.", 'I wait, because you come'],
            ['Er arbeitet, weil er Geld braucht.', 'He works because he needs money.', 'He works, because he money needs'],
            ['Ich komme, wenn du willst.', "I'll come if you want.", 'I come, if you want'],
            ['Er geht, wenn es regnet.', 'He goes when it rains.', 'He goes, when it rains'],
            ['Wir spielen, wenn wir Zeit haben.', 'We play when we have time.', 'We play, when we time have'],
            ['Sie ruft an, wenn sie kann.', 'She calls when she can', 'She calls, when she can'],
            ['Ich helfe dir, wenn du fragst.', "I'll help you if you ask.", 'I help you, if you ask'],
            ['Er ist größer als ich.', 'He is taller than I.', 'He is bigger than I'],
            ['Das ist besser als das.', 'This is better than that.', 'That is better than that'],
            ['Sie ist so alt wie er.', 'She is as old as he.', 'She is as old as he'],
            ['Das Auto ist schneller.', 'The car is faster.', 'The car is faster'],
            ['Ich bin kleiner als du.', 'I am smaller than you.', 'I am smaller than you'],
            ['Ich gehe durch den Park.', 'I go through the park.', 'I go through the park'],
            ['Er kommt ohne sie.', 'He comes without her.', 'He comes without her'],
            ['Wir fahren um die Stadt.', 'We drive around the city.', 'We drive around the city'],
            ['Das ist für dich.', 'This is for you.', 'That is for you'],
            ['Ich gehe gegen den Wind.', 'I walk against the wind.', 'I go against the wind'],
            ['Ich bin bei dir.', 'I am with you.', 'I am at you'],
            ['Er kommt aus der Stadt.', 'He comes from the city.', 'He comes from the city'],
            ['Wir gehen nach Hause.', 'We are going home.', 'We go to home'],
            ['Das kommt von mir.', 'That comes from me.', 'That comes from me'],
            ['Sie ist seit gestern hier.', 'She has been here since yesterday.', 'She is since yesterday here'],
            ['Ich wohne bei meiner Mutter.', 'I live with my mother.', 'I live at my mother'],
            ['Ich bin in der Schule.', 'I am at school.', 'I am in the school'],
            ['Er geht in die Schule.', 'He goes to school.', 'He goes in the school'],
            ['Das Buch liegt auf dem Tisch.', 'The book is lying on the table.', 'The book lies on the table'],
            ['Ich lege das Buch auf den Tisch.', 'I put the book on the table.', 'I lay the book on the table'],
            ['Wir sind an der Tür.', 'We are at the door.', 'We are at the door'],
            ['Ich freue mich.', 'I am happy.', 'I rejoice myself'],
            ['Er interessiert sich dafür.', 'He is interested in it.', 'He interests himself for-that'],
            ['Wir treffen uns heute.', 'We are meeting today.', 'We meet us today'],
            ['Sie erinnert sich daran.', 'She remembers it.', 'She remembers herself at-that'],
            ['Ich fühle mich gut.', 'I feel good.', 'I feel myself good'],
            ['Er setzt sich hin.', 'He sits down.', 'He sets himself down'],
            ['Ich stehe früh auf.', 'I get up early.', 'I stand early up'],
            ['Er kommt morgen an.', 'He arrives tomorrow.', 'He comes tomorrow at'],
            ['Wir gehen heute aus.', 'We are going out today.', 'We go today out'],
            ['Sie macht die Tür auf.', 'She opens the door.', 'She makes the door open'],
            ['Ich rufe dich an.', "I'll call you.", 'I call you at'],
            ['Er fängt an zu arbeiten.', 'He starts to work.', 'He catches to work at'],
            ['Wir hören damit auf.', 'We stop with that.', 'We hear with-that up'],
            ['Guten Tag!', 'Good day!', 'Good day!'],
            ['Wie heißt du?', "What's your name?", 'How are-called you?'],
            ['Ich heiße Max.', 'My name is Max.', 'I am-called Max'],
            ['Es tut mir leid.', "I'm sorry.", 'It does to-me sorry'],
            ['Keine Sorge.', 'No worries.', 'No worry'],
            ['Viel Glück!', 'Good luck!', 'Much luck!'],
            ['Bis bald!', 'See you soon!', 'Until soon!'],
            ['Alles Gute!', 'All the best!', 'All good!'],
            ['Macht nichts.', "It doesn't matter.", 'Makes nothing'],
            ['Auf Wiedersehen!', 'Goodbye!', 'On again-seeing!'],
            ['Ich komme um drei Uhr.', "I'm coming at three o'clock.", 'I come at three clock'],
            ['Wir treffen uns am Montag.', "We're meeting on Monday.", 'We meet us on Monday'],
            ['Er arbeitet den ganzen Tag.', 'He works all day.', 'He works the whole day'],
            ['Sie kommt nächste Woche.', "She's coming next week.", 'She comes next week'],
            ['Ich war gestern dort.', 'I was there yesterday.', 'I was yesterday there'],
            ['Wir fahren heute los.', "We're leaving today.", 'We drive today off'],
            ['Ich trinke Kaffee.', 'I drink coffee.', 'I drink coffee'],
            ['Er isst Brot.', 'He eats bread.', 'He eats bread'],
            ['Wir machen Hausaufgaben.', 'We do homework.', 'We make house-tasks'],
            ['Sie liest ein Buch.', 'She reads a book.', 'She reads a book'],
            ['Ich höre Musik.', 'I listen to music.', 'I hear music'],
            ['Er spielt Fußball.', 'He plays soccer.', 'He plays foot-ball'],
            ['Wir sehen fern.', 'We watch TV.', 'We see far'],
            ['Ich bin zu Hause.', 'I am at home.', 'I am to house'],
            ['Er geht zur Arbeit.', 'He goes to work.', 'He goes to-the work'],
            ['Wir fahren in die Stadt.', 'We drive to the city.', 'We drive in the city'],
            ['Sie kommt vom Markt.', 'She comes from the market.', 'She comes from-the market'],
            ['Das liegt in der Nähe.', 'That is nearby.', 'That lies in the nearness'],
            ['Es ist weit weg.', 'It is far away.', 'It is far away'],
            ['Ich kann Deutsch sprechen.', 'I can speak German.', 'I can German speak'],
            ['Er kann Auto fahren.', 'He can drive a car.', 'He can car drive'],
            ['Wir können das machen.', 'We can do that.', 'We can that make'],
            ['Sie kann gut kochen.', 'She can cook well.', 'She can well cook'],
            ['Ich kann nicht singen.', 'I cannot sing.', 'I can not sing'],
            ['Ich möchte etwas essen.', 'I would like to eat something.', 'I would-like something eat'],
            ['Er will nach Hause gehen.', 'He wants to go home.', 'He wants to home go'],
            ['Wir wollen das sehen.', 'We want to see that.', 'We want that see'],
            ['Sie möchte helfen.', 'She would like to help.', 'She would-like help'],
            ['Ich will das nicht.', "I don't want that.", 'I want that not'],
            ['Ich muss jetzt gehen.', 'I must go now.', 'I must now go'],
            ['Er soll hier bleiben.', 'He should stay here.', 'He should here stay'],
            ['Wir müssen das machen.', 'We must do that.', 'We must that make'],
            ['Sie soll das nicht sagen.', "She shouldn't say that.", 'She should that not say'],
            ['Ich muss früh aufstehen.', 'I must get up early.', 'I must early up-stand'],
            ['Ich denke, das ist gut.', 'I think that is good.', 'I think, that is good'],
            ['Er glaubt mir nicht.', "He doesn't believe me.", 'He believes me not'],
            ['Wir finden das interessant.', 'We find that interesting.', 'We find that interesting'],
            ['Sie meint das ernst.', 'She means that seriously.', 'She means that serious'],
            ['Ich halte das für richtig.', 'I consider that correct.', 'I hold that for correct'],
            ['Kann ich dir helfen?', 'Can I help you?', 'Can I you help?'],
            ['Darf ich das haben?', 'May I have that?', 'May I that have?'],
            ['Kannst du mir helfen?', 'Can you help me?', 'Can you me help?'],
            ['Dürfen wir gehen?', 'May we go?', 'May we go?'],
            ['Könnten Sie das erklären?', 'Could you explain that?', 'Could you that explain?'],
            ['Ich war gestern in der Stadt.', 'I was in the city yesterday.', 'I was yesterday in the city'],
            ['Er hatte keine Zeit.', 'He had no time.', 'He had no time'],
            ['Wir waren im Kino.', 'We were at the cinema.', 'We were in-the cinema'],
            ['Sie hatte viel Arbeit.', 'She had a lot of work.', 'She had much work'],
            ['Ich war sehr müde.', 'I was very tired.', 'I was very tired'],
            ['Ich werde morgen kommen.', 'I will come tomorrow.', 'I will tomorrow come'],
            ['Er wird das machen.', 'He will do that.', 'He will that make'],
            ['Wir werden es versuchen.', 'We will try it.', 'We will it try'],
            ['Sie wird bald hier sein.', 'She will be here soon.', 'She will soon here be'],
            ['Ich werde dort warten.', 'I will wait there.', 'I will there wait'],
            ['Ich weiß nicht, ob er kommt.', "I don't know if he's coming.", 'I know not, whether he comes'],
            ['Er fragt, wann wir gehen.', "He asks when we're going.", 'He asks, when we go'],
            ['Wir sehen, was passiert.', 'We see what happens.', 'We see, what happens'],
            ['Sie weiß nicht, wo ich bin.', "She doesn't know where I am.", 'She knows not, where I am'],
            ['Ich frage mich, warum das so ist.', 'I wonder why that is.', 'I ask myself, why that so is'],
            ['Obwohl es regnet, gehe ich.', "Although it's raining, I'm going.", 'Although it rains, go I'],
            ['Während er arbeitet, spiele ich.', 'While he works, I play.', 'While he works, play I'],
            ['Bevor ich gehe, rufe ich an.', "Before I go, I'll call.", 'Before I go, call I on'],
            ['Nachdem ich esse, gehe ich.', "After I eat, I'll go.", 'After I eat, go I'],
            ['Als ich kam, war er weg.', 'When I came, he was gone.', 'When I came, was he away'],
            ['Ich komme, aber ich bin spät.', "I'm coming, but I'm late.", 'I come, but I am late'],
            ['Er oder sie kann helfen.', 'He or she can help.', 'He or she can help'],
            ['Wir gehen und sie bleibt.', 'We go and she stays.', 'We go and she stays'],
            ['Ich bleibe, denn ich bin müde.', "I'm staying because I'm tired.", 'I stay, because I am tired'],
            ['Es ist kalt.', 'It is cold.', 'It is cold'],
            ['Es regnet heute.', "It's raining today.", 'It rains today'],
            ['Die Sonne scheint.', 'The sun is shining.', 'The sun shines'],
            ['Es schneit im Winter.', 'It snows in winter.', 'It snows in-the winter'],
            ['Das Wetter ist schön.', 'The weather is nice.', 'The weather is nice'],
            ['Er ist sehr nett.', 'He is very nice.', 'He is very nice'],
            ['Sie ist jung und schön.', 'She is young and beautiful.', 'She is young and beautiful'],
            ['Wir sind glücklich.', 'We are happy.', 'We are happy'],
            ['Du bist klug.', 'You are smart.', 'You are smart'],
            ['Ich bin zufrieden.', 'I am satisfied.', 'I am satisfied'],
            ['Ich brauche Hilfe.', 'I need help.', 'I need help'],
            ['Wo ist die Straße?', 'Where is the street?', 'Where is the street'],
            ['Ich komme mit dem Zug.', 'I am coming by train.', 'I come with the train'],
            ['Wir gehen zur Arbeit.', 'We are going to work.', 'We go to the work'],
            ['Ich habe keine Zeit.', 'I have no time.', 'I have no time'],
            ['Kannst du mir helfen?', 'Can you help me?', 'Can you me help'],
            ['Wie komme ich zum Bahnhof?', 'How do I get to the station?', 'How come I to the station'],
            ['Ich gebe Geld.', 'I give money.', 'I give money'],
            ['Wir suchen den Weg.', 'We are looking for the way.', 'We search the way'],
            ['Ich nehme Wasser.', 'I take water.', 'I take water'],
            ['Wir warten hier.', 'We wait here.', 'We wait here'],
            ['Ich brauche ein Zimmer.', 'I need a room.', 'I need a room'],
            ['Ich will sprechen.', 'I want to speak.', 'I want to speak'],
            ['Wir finden die Stadt.', 'We find the city.', 'We find the city']
        ];

        let selectedGerman = null;
        let selectedEnglish = null;
        let roundMatches = 0;
        let totalCorrect = 0;
        let totalAttempts = 0;
        let roundNumber = 1;
        let currentRoundPhrases = [];
        let usedIndices = [];

        function shuffle(a) {
            const n = [...a];
            for (let i = n.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [n[i], n[j]] = [n[j], n[i]];
            }
            return n;
        }

        function getRandomPhrases(count) {
            const available = [];
            for (let i = 0; i < allPhrases.length; i++) {
                if (!usedIndices.includes(i)) available.push(i);
            }
            if (available.length < count) {
                usedIndices = [];
                for (let i = 0; i < allPhrases.length; i++) available.push(i);
            }
            const selection = [];
            for (let i = 0; i < count && available.length > 0; i++) {
                const randIndex = Math.floor(Math.random() * available.length);
                const phraseIndex = available[randIndex];
                selection.push(allPhrases[phraseIndex]);
                usedIndices.push(phraseIndex);
                available.splice(randIndex, 1);
            }
            return selection;
        }

        function speakText(text, lang, e) {
            if (e) e.stopPropagation();
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const u = new SpeechSynthesisUtterance(text);
                u.lang = lang === 'de' ? 'de-DE' : 'en-US';
                u.rate = 0.85;
                window.speechSynthesis.speak(u);
            }
        }

        function playTone(freq, duration) {
            try {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.type = 'sine';
                osc.frequency.value = freq;
                gain.gain.value = 0.06;
                osc.connect(gain);
                gain.connect(ctx.destination);
                osc.start();
                osc.stop(ctx.currentTime + duration);
                setTimeout(() => ctx.close(), duration * 1000 + 60);
            } catch (e) {
                // ignore audio errors
            }
        }

        function flipCard(card, e) {
            e.stopPropagation();
            card.classList.toggle('flipped');
        }

        function loadRound() {
            const gc = document.getElementById('germanPhrases');
            const ec = document.getElementById('englishPhrases');
            const md = document.getElementById('message');
            gc.innerHTML = '';
            ec.innerHTML = '';
            md.textContent = '';
            roundMatches = 0;
            selectedGerman = null;
            selectedEnglish = null;

            currentRoundPhrases = getRandomPhrases(10);
            const shuffledEnglish = shuffle([...currentRoundPhrases]);

            currentRoundPhrases.forEach((phrase) => {
                const card = document.createElement('div');
                card.className = 'phrase-card';

                const content = document.createElement('div');
                content.className = 'phrase-content';
                const text = document.createElement('span');
                text.className = 'phrase-text';
                text.textContent = phrase[0];
                const literal = document.createElement('span');
                literal.className = 'phrase-literal';
                literal.textContent = phrase[2];
                content.appendChild(text);
                content.appendChild(literal);

                const icons = document.createElement('div');
                icons.className = 'card-icons';

                const speaker = document.createElement('div');
                speaker.className = 'icon-btn';
                speaker.title = 'Listen';
                speaker.innerHTML = `<svg viewBox="0 0 24 24" fill="none" stroke-width="2"><path d="M4 10v4h4l5 4V6L8 10H4Z"/><path d="M16 9a4 4 0 0 1 0 6"/><path d="M19 6a8 8 0 0 1 0 12"/></svg>`;
                speaker.onclick = (e) => speakText(phrase[0], 'de', e);

                const flip = document.createElement('div');
                flip.className = 'icon-btn';
                flip.title = 'Show literal';
                flip.innerHTML = `<svg viewBox="0 0 24 24" fill="none" stroke-width="2"><path d="M3 12a9 9 0 1 0 3-6.7"/><path d="M3 4v5h5"/></svg>`;
                flip.onclick = (e) => flipCard(card, e);

                icons.appendChild(speaker);
                icons.appendChild(flip);
                card.appendChild(content);
                card.appendChild(icons);
                card.dataset.german = phrase[0];
                card.dataset.english = phrase[1];
                card.onclick = () => selectGerman(card);
                gc.appendChild(card);
            });

            shuffledEnglish.forEach((phrase) => {
                const card = document.createElement('div');
                card.className = 'phrase-card';

                const content = document.createElement('div');
                content.className = 'phrase-content';
                const text = document.createElement('span');
                text.className = 'phrase-text';
                text.textContent = phrase[1];
                content.appendChild(text);

                const icons = document.createElement('div');
                icons.className = 'card-icons';

                const speaker = document.createElement('div');
                speaker.className = 'icon-btn';
                speaker.title = 'Listen';
                speaker.innerHTML = `<svg viewBox="0 0 24 24" fill="none" stroke-width="2"><path d="M4 10v4h4l5 4V6L8 10H4Z"/><path d="M16 9a4 4 0 0 1 0 6"/><path d="M19 6a8 8 0 0 1 0 12"/></svg>`;
                speaker.onclick = (e) => speakText(phrase[1], 'en', e);

                icons.appendChild(speaker);
                card.appendChild(content);
                card.appendChild(icons);
                card.dataset.english = phrase[1];
                card.dataset.german = phrase[0];
                card.onclick = () => selectEnglish(card);
                ec.appendChild(card);
            });

            updateStats();
        }

        function selectGerman(card) {
            if (card.classList.contains('matched')) return;
            document.querySelectorAll('#germanPhrases .phrase-card').forEach((x) => x.classList.remove('selected'));
            card.classList.add('selected');
            selectedGerman = card;
            checkMatch();
        }

        function selectEnglish(card) {
            if (card.classList.contains('matched')) return;
            document.querySelectorAll('#englishPhrases .phrase-card').forEach((x) => x.classList.remove('selected'));
            card.classList.add('selected');
            selectedEnglish = card;
            checkMatch();
        }

        function checkMatch() {
            if (!selectedGerman || !selectedEnglish) return;
            const md = document.getElementById('message');
            totalAttempts++;

            if (selectedGerman.dataset.english === selectedEnglish.dataset.english) {
                selectedGerman.classList.add('matched');
                selectedEnglish.classList.add('matched');
                selectedGerman.classList.remove('selected');
                selectedEnglish.classList.remove('selected');
                md.textContent = 'Correct.';
                md.className = 'message success';
                roundMatches++;
                totalCorrect++;
                playTone(520, 0.08);
                selectedGerman = null;
                selectedEnglish = null;
                setTimeout(() => { md.textContent = ''; }, 600);
            } else {
                selectedGerman.classList.add('wrong');
                selectedEnglish.classList.add('wrong');
                md.textContent = 'Try again.';
                md.className = 'message error';
                playTone(220, 0.08);
                setTimeout(() => {
                    selectedGerman.classList.remove('wrong', 'selected');
                    selectedEnglish.classList.remove('wrong', 'selected');
                    selectedGerman = null;
                    selectedEnglish = null;
                    md.textContent = '';
                }, 700);
            }
            updateStats();
        }

        function updateStats() {
            document.getElementById('roundNumber').textContent = roundNumber;
            document.getElementById('roundScore').textContent = `${roundMatches}/10`;
            document.getElementById('totalScore').textContent = totalCorrect;
            const accuracy = totalAttempts > 0 ? Math.round((totalCorrect / totalAttempts) * 100) : 0;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
        }

        document.getElementById('nextBtn').addEventListener('click', () => {
            roundNumber++;
            loadRound();
        });

        document.getElementById('homeBtnFooter').addEventListener('click', () => {
            window.location.href = 'index.html';
        });

        loadRound();

</script>
    <script src="menu-settings.js"></script>

    <div class="settings-fab" id="settingsFab" aria-label="Open settings">
        ⚙
    </div>
    <div class="settings-panel" id="settingsPanel">
        <h4>Settings</h4>
        <div class="settings-row">
            <label for="settingsTheme" style="font-weight:600;">Theme</label>
            <select id="settingsTheme">
                <option value="system">System</option>
                <option value="light">Light</option>
                <option value="dark">Dark</option>
            </select>
        </div>
        <div class="debug-box" id="deeplDebug">DeepL debug available on Translate page.</div>
        <div class="settings-actions">
            <button id="debugTestBtn">Test DeepL</button>
            <button id="debugClearBtn">Clear cache</button>
        </div>
        <div class="settings-note">Theme settings apply across all pages.</div>
    </div>

</body>
</html>
