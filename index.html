<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>German Learning - Complete</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="app-header">
            <div class="header-content">
                <h1 class="app-title">ğŸ‡©ğŸ‡ª German Learning Pro</h1>
                <p class="app-tagline">Lessons â€¢ Parser â€¢ Matching â€¢ DeepL Translation</p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Tab Navigation -->
            <div class="tab-navigation">
                <button class="tab-btn active" onclick="switchTab('lessons')" id="tab-lessons">
                    <span class="tab-icon">ğŸ“š</span> Lessons
                </button>
                <button class="tab-btn" onclick="switchTab('parser')" id="tab-parser">
                    <span class="tab-icon">ğŸ”</span> Parser
                </button>
                <button class="tab-btn" onclick="switchTab('matching')" id="tab-matching">
                    <span class="tab-icon">ğŸ®</span> Match Game
                </button>
                <button class="tab-btn" onclick="switchTab('deepl')" id="tab-deepl">
                    <span class="tab-icon">ğŸŒ</span> DeepL Test
                </button>
            </div>

            <!-- LESSONS TAB -->
            <div id="lessons" class="tab-content active">
                <div class="section-header">
                    <h2>German Lessons</h2>
                    <div class="controls-group">
                        <select id="levelSelect" onchange="updateLevel(this.value)" class="form-select">
                            <option value="A1.1">A1.1 - Beginner</option>
                            <option value="A1.2">A1.2 - Modal Verbs</option>
                            <option value="A2.1">A2.1 - Past Tense</option>
                            <option value="B1.1">B1.1 - Intermediate</option>
                        </select>
                        <select id="professionSelect" onchange="updateProfession(this.value)" class="form-select">
                            <option value="general">General German</option>
                            <option value="logistics">Logistics</option>
                        </select>
                    </div>
                </div>

                <!-- Grammar Section -->
                <div class="lesson-section">
                    <h3>ğŸ“– Grammar Rules</h3>
                    <div id="grammarBox" class="grammar-content">
                        <p>Select a level and profession above to load grammar.</p>
                    </div>
                </div>

                <!-- Words Section -->
                <div class="lesson-section">
                    <h3>ğŸ“ Vocabulary (Tap to Reveal)</h3>
                    <div class="words-grid" id="wordsGrid">
                        <!-- Words rendered here -->
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn-primary" onclick="prevWordsPage()">Previous</button>
                        <span style="margin: 0 16px;" id="wordsPageBadge">Page 1</span>
                        <button class="btn-primary" onclick="nextWordsPage()">Next</button>
                    </div>
                </div>

                <!-- Sentences Section -->
                <div class="lesson-section">
                    <h3>ğŸ—£ï¸ Sentences with Literal Word Order</h3>
                    <div style="background-color: var(--color-secondary); padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                        <div id="sentenceDisplay">
                            <p><strong>German:</strong> <span id="sentGerman" style="color: var(--color-primary);">-</span></p>
                            <p><strong>English:</strong> <span id="sentEnglish">-</span></p>
                            <p><strong>Pronunciation:</strong> <span id="sentPronunciation" style="font-style: italic; color: var(--color-text-secondary);">-</span></p>
                        </div>
                    </div>
                    <div id="literalOrderBox" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); padding: 16px; border-radius: 8px; margin-bottom: 16px; color: white;">
                        <strong>Literal Word-by-Word Order:</strong>
                        <div id="literalOrderDisplay" style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px;"></div>
                    </div>
                    <div style="text-align: center; gap: 8px;">
                        <button class="btn-primary" onclick="prevSentence()">Previous Sentence</button>
                        <span style="margin: 0 16px;" id="sentenceBadge">Sentence 1</span>
                        <button class="btn-primary" onclick="nextSentence()">Next Sentence</button>
                    </div>
                </div>
            </div>

            <!-- PARSER TAB -->
            <div id="parser" class="tab-content">
                <div class="section-header">
                    <h2>German Text Parser</h2>
                </div>

                <div class="lesson-section">
                    <h3>ğŸ“‹ Parse German Text</h3>
                    <div style="margin-bottom: 16px;">
                        <label for="parserInput" class="form-label">Paste your German text:</label>
                        <textarea id="parserInput" class="parser-textarea" placeholder="Paste German text here...
Example: Ich bin hier. Du hast Zeit. Der Mann fÃ¤hrt schnell."></textarea>
                        <button class="btn-primary" onclick="parseText()">Parse & Analyze</button>
                        <button class="btn-primary" onclick="clearParser()" style="margin-left: 8px;">Clear</button>
                    </div>
                </div>

                <!-- Parser Results -->
                <div id="parserResults" style="display: none;" class="lesson-section">
                    <h3>âœ… Parsed Results</h3>
                    
                    <!-- Literal Order Analysis -->
                    <div style="background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%); padding: 16px; border-radius: 8px; margin-bottom: 24px; border: 2px solid #28a745;">
                        <strong style="color: #155724; display: block; margin-bottom: 12px;">ğŸ“ Literal Word-by-Word Analysis</strong>
                        <div id="parserLiteralOrder" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 12px;"></div>
                    </div>

                    <!-- Extracted Vocabulary Table -->
                    <div style="background-color: var(--color-secondary); padding: 16px; border-radius: 8px; margin-bottom: 24px; overflow-x: auto;">
                        <strong style="display: block; margin-bottom: 12px;">ğŸ“š Extracted Vocabulary</strong>
                        <table id="parserTable" style="width: 100%; border-collapse: collapse; font-size: 14px;">
                            <thead style="background-color: var(--color-secondary-hover);">
                                <tr>
                                    <th style="padding: 8px; text-align: left; border-bottom: 1px solid var(--color-border);">German</th>
                                    <th style="padding: 8px; text-align: left; border-bottom: 1px solid var(--color-border);">English</th>
                                    <th style="padding: 8px; text-align: left; border-bottom: 1px solid var(--color-border);">Type</th>
                                    <th style="padding: 8px; text-align: left; border-bottom: 1px solid var(--color-border);">Pronunciation</th>
                                </tr>
                            </thead>
                            <tbody id="parserTableBody"></tbody>
                        </table>
                    </div>

                    <!-- Matching Game from Parsed Words -->
                    <div style="background-color: var(--color-surface); padding: 16px; border-radius: 8px; border: 2px solid var(--color-primary); margin-bottom: 24px;">
                        <strong style="display: block; margin-bottom: 16px; color: var(--color-primary);">ğŸ® Match Parsed Words</strong>
                        <div class="matching-game">
                            <div>
                                <h4 style="color: var(--color-primary); margin-bottom: 12px;">English</h4>
                                <div id="parserMatchEn"></div>
                            </div>
                            <div>
                                <h4 style="color: var(--color-primary); margin-bottom: 12px;">Deutsch</h4>
                                <div id="parserMatchDe"></div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 16px;">
                            <p id="parserMatchMsg" style="color: var(--color-primary); font-weight: 500;">Click English word, then German match</p>
                            <div style="background-color: var(--color-secondary); height: 8px; border-radius: 4px; overflow: hidden; margin: 12px 0;">
                                <div id="parserMatchProgress" style="background-color: var(--color-primary); height: 100%; width: 0%; transition: width 0.3s;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MATCHING GAME TAB -->
            <div id="matching" class="tab-content">
                <div class="section-header">
                    <h2>Vocabulary Matching Game</h2>
                    <button class="btn-primary" onclick="newMatchSet()">New Set</button>
                </div>

                <div class="lesson-section">
                    <div class="matching-game">
                        <div>
                            <h4 style="color: var(--color-primary); margin-bottom: 12px;">English</h4>
                            <div id="matchEnList"></div>
                        </div>
                        <div>
                            <h4 style="color: var(--color-primary); margin-bottom: 12px;">Deutsch</h4>
                            <div id="matchDeList"></div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <p id="matchMsg" style="color: var(--color-primary); font-weight: 500;">Click an English word, then its German match</p>
                        <div style="background-color: var(--color-secondary); height: 8px; border-radius: 4px; overflow: hidden; margin: 16px 0;">
                            <div id="matchProgress" style="background-color: var(--color-primary); height: 100%; width: 0%; transition: width 0.3s;"></div>
                        </div>
                        <p id="matchStats" style="color: var(--color-text-secondary); font-size: 14px;">Matched: 0/10</p>
                    </div>
                </div>
            </div>

            <!-- DEEPL TEST TAB -->
            <div id="deepl" class="tab-content">
                <div class="section-header">
                    <h2>DeepL Translation Tester</h2>
                </div>

                <div class="lesson-section">
                    <h3>ğŸ§ª Test DeepL Connection</h3>
                    <p style="color: var(--color-text-secondary); margin-bottom: 16px;">Enter German text to test if DeepL API is working properly.</p>
                    
                    <label for="deeplInput" class="form-label">German Text:</label>
                    <textarea id="deeplInput" class="parser-textarea" placeholder="Ich bin hier. Das ist schÃ¶n."></textarea>
                    
                    <button class="btn-primary" onclick="testDeepL()">Test DeepL Translation</button>
                    <button class="btn-primary" onclick="clearDeepL()" style="margin-left: 8px;">Clear</button>

                    <div id="deeplResults" style="display: none; margin-top: 24px;">
                        <div style="background-color: var(--color-secondary); padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                            <strong style="color: var(--color-primary); display: block; margin-bottom: 8px;">ğŸ“ Original German:</strong>
                            <p id="deeplOriginal" style="margin: 0; font-family: monospace;"></p>
                        </div>

                        <div id="deeplSuccess" style="display: none;">
                            <div style="background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%); padding: 16px; border-radius: 8px; border: 2px solid #28a745; margin-bottom: 16px;">
                                <strong style="color: #155724; display: block; margin-bottom: 8px;">âœ… DeepL Translation (WORKING):</strong>
                                <p id="deeplTranslated" style="margin: 0; font-family: monospace; color: #155724;"></p>
                            </div>
                        </div>

                        <div id="deeplError" style="display: none;">
                            <div style="background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%); padding: 16px; border-radius: 8px; border: 2px solid #c3343d; margin-bottom: 16px;">
                                <strong style="color: #721c24; display: block; margin-bottom: 8px;">âŒ DeepL Error:</strong>
                                <p id="deeplErrorMsg" style="margin: 0; color: #721c24;"></p>
                            </div>
                        </div>

                        <div id="deeplStatus" style="background-color: var(--color-surface); padding: 16px; border-radius: 8px; border-left: 4px solid var(--color-info);">
                            <strong>Status Details:</strong>
                            <div id="deeplStatusText" style="margin-top: 8px; font-family: monospace; font-size: 12px; white-space: pre-wrap; word-break: break-all;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>
